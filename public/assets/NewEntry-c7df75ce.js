import{_ as y,d as C,o as h,an as c,N as u,am as E,as as k,Z as I,P as B,T as P,ah as b,aR as F,aS as U,r as v,a as o,w as l,L as g,Q as $,aq as R,ao as M,c as H,ar as A,O}from"./index-865f8557.js";import{a as p,V as W}from"./VCol-43a85519.js";import{V as q}from"./VCheckbox-2f66e71c.js";class j extends Error{constructor(n="This feature is not implemented yet."){super(n),this.name="NotImplementedError"}}function z(e){if(this.removePlaceholder(),this.activeButton===e){this.surroundTextWithTag("normal_button");return}const n=this.getSelectedText();let s="";if(n.length===0)s+=this.tags.get(e)[0]+"&shy;"+this.tags.get(e)[1];else{s=this.tags.get(e)[0];for(let a=0;a<n.length;a++)this.operators.has(n[a])?s+=this.tags.get(e)[1]+n[a]+this.tags.get(e)[0]:s+=n[a];s+=this.tags.get(e)[1]}document.execCommand("insertHTML",!1,s),this.activeButton=e}function D(){let e=this.removeTemplateLiterals(this.getSelectedText());e.length===0?e="▯ ▯":e.includes(" ")||(e+=" ▯");let n='<span class="stacked"><sup>';for(let s=0;s<e.length;s++)e[s]===" "?n+="</sup><sub>":this.operators.has(e[s])||(n+=e[s]);n+="</sub></span> &shy;",document.execCommand("insertHTML",!1,n),this.activeButton="normal_button"}function K(e){this.getSelectedText();let n="";n+=this.removeTemplateLiterals(e),document.execCommand("insertHTML",!1,n),this.activeButton="normal_button"}function J(e){if(this.isConverted)return this.isConverted=!1,this.input=this.previous,e;let n=e;if(n=X(n),n=n.replace(/<\/sub><sub>/g,""),n=n.replace(/<\/sup><sup>/g,""),n=n.replace(/­| /g,""),n=n.replace(/<sub>(.*?)&shy;(.*?)<\/sub>/g,"<sub>$1$2</sub>"),!n.trim())return"Error: input text is empty";if(n.slice(0,5)==="<sub>")return"Error: subscript without normal text";let s=Z(n);n=s[0];let a=s[1];n=n.replace(/<sup>.*?<\/sup>/g,"");let r=[],m="",t="",i=!1;for(let d=0;d<n.length;d++){if(n.slice(d,d+5)==="<sub>"){for(d+=5;n.slice(d,d+6)!=="</sub>";)m+=n[d],d++;i=!0;continue}if(n.slice(d,d+6)==="</sub>"){i=!1;continue}let f=d;for(;f+1<n.length&&n[f+1]===n[f+1].toLowerCase();)f++;t=n.slice(d,f+1),d=f,i&&(t+="<sub>"+m+"</sub>",m="",i=!1);let _=t.replace(/<sub>.*<\/sub>/,"");if(!this.elements.has(_))return`Error: "${_}" not a valid element`;if(d+1===n.length||n.slice(d,d+5)!=="<sub>"){let T=t.match(/<sub>(.*?)<\/sub>/);r.push(w([_,T?T[1]:1]))}}return isNaN(a)&&(a=0),this.isConverted=!0,this.previous=e,this.$emit("compute-formula",w(r)),this.$emit("compute-charge",a),w([r,a])}function w(e){return"{"+e.join(",")+"}"}function X(e){let n="",s=0;for(let a=0;a<e.length;a++)if(e.substring(a,a+22)==='<span class="stacked">'){for(a+=22,s=a;e.substring(s,s+7)!=="</span>";)s++;n+=e.substring(a,s),a=s+6}else n+=e[a];return n}function Z(e){let n=0,s="";for(let a=0;a<e.length;a++)if(e.slice(a,a+5)==="<sup>"){for(a+=5;e.slice(a,a+6)!=="</sup>";)s+=e[a],a++;s==="-"?n-=1:s==="+"?n+=1:s[s.length-1]==="-"?n-=parseInt(s):n+=parseInt(s),s=""}return[e,n]}function G(){const e=window.getSelection();return e.rangeCount>0?e.getRangeAt(0).toString():null}function Y(){const e=window.getSelection();if(e.rangeCount>0){const n=e.getRangeAt(0),s=n.cloneRange();s.selectNodeContents(this.$refs.myTextBox),s.setEnd(n.endContainer,n.endOffset),this.caretPosition=s.toString().length}}function Q(e){throw new j}function x(){for(let e;e<this.displayText.length;e++)this.operators.has(this.displayText[e])&&this.removeTemplateLiterals(this.displayText[e])}function ee(e){const n=/\${(.*?)}/g;return e.replace(n,"")}function ne(e){this.displayText=e.target.innerHTML,this.normalizeOperators()}function te(e){(this.$refs.myTextBox.textContent===this.name||this.input===this.name)&&(this.$refs.myTextBox.textContent="",this.input="")}function oe(e){this.$refs.myTextBox.textContent===""&&(this.$refs.myTextBox.textContent=this.name)}function se(){this.showingPopup=!0}function ae(){this.showingPopup=!1}function ie(){let e={HO:[[["H","1"],["O","1"]],0],"H<sub>2</sub>":[[["H","2"]],0],"H<sub>2</sub>O":[[["H","2"],["O","1"]],0],"":"Error: input text is empty","<sub></sub>":"Error: input text is empty","<sub>1</sub>":"Error: unclosed subscript tag","H<sub>2</sub>O<sub>":"Error: unclosed subscript tag","<sub>2</sub>":"Error: subscript without normal text","H<sub>2</sub><sub>2</sub>":[[["H","22"]],0],"H<sub>2</sub><sub></sub>":[[["H","2"]],0],"H<sub>&shy;</sub>":[[["H","1"]],0],"H<sub>&shy;2</sub>":[[["H","2"]],0],"H<sub>2&shy;</sub>":[[["H","2"]],0],"H<sub>2&shy;3</sub>":[[["H","23"]],0],"H<sub>&shy;</sub>C<sub>&shy;</sub":[[["H","1"],["C","1"]],0],"H<sub>&shy;</sub>C<sub>2</sub":[[["H","1"],["C","2"]],0],H:[[["H","1"]],0],HCr:[[["H","1"],["Cr","1"]],0],"H<sub>2</sub>":[[["H","2"]],0],"HCr<sub>2</sub>":[[["H","1"],["Cr","2"]],0],BeB:[[["Be","1"],["B","1"]],0],"Be<sub>2</sub>Be":[[["Be","2"],["Be","1"]],0],be:'Error: "be" not a valid element',"Be<sup>0</sup>":[[["Be","1"]],0],"Be<sup>1</sup>":[[["Be","1"]],1],"Be<sup>2</sup>":[[["Be","1"]],2],"Be<sup>1</sup>B<sup>2</sup>":[[["Be","1"],["B","2"]],3],"Be<sup>1</sup>B<sup>-1</sup>":[[["Be","1"],["B","2"]],0],"Be<sup>1</sup>B<sup>-2</sup>":[[["Be","1"],["B","2"]],-1],"Be<sup>+</sup>":[[["Be","1"]],1],"Be<sup>-</sup>":[[["Be","1"]],-1],"Be<sup>-</sup>B<sup>+</sup>":[[["Be","1"],["B","1"]],0]},n=!0,s=Object.keys(e),a=Object.values(e);for(let r=0;r<s.length;r++)n=this.compute(s[r])==a[r],console.log(`Test: ${r+1} -- ${n?"Passed":"Failed"}`),console.log(`Input: ${s[r]}`),console.log(`Expected: ${a[r]}`),n||console.log(`Received: ${this.compute(s[r])}`)}const le=C({props:{name:{type:String},width:{type:String}},data(){return{input:this.name,activeButton:"normal_button",displayText:"",computedText:"",operators:new Set(["⇒","⇄"]),caretPosition:0,tags:new Map([["sup_button",["<sup>","</sup>"]],["sub_button",["<sub>","</sub>"]],["normal_button",["",""]]]),elements:new Set(["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt"]),showingPopup:!1,isConverted:!1,previous:""}},methods:{surroundTextWithTag:z,surroundTextWithboth:D,insertOperator:K,compute:J,computeTestCases:ie,getSelectedText:G,updateCaretPosition:Y,removeAdjacent:Q,normalizeOperators:x,removeTemplateLiterals:ee,updateText:ne,removePlaceholder:te,addPlaceholder:oe,showPopup:se,hidePopup:ae}}),S=e=>(F("data-v-0926ac63"),e=e(),U(),e),re={class:"input-container"},de=S(()=>u("div",{class:"icon-wrapper"},[u("span",{class:"mdi mdi-gold prepend-icon"})],-1)),ue=["innerHTML"],pe={class:"button-container"},me=S(()=>u("sup",null,"2",-1)),ge=S(()=>u("sub",null,"2",-1)),fe={key:0,class:"popup"};function he(e,n,s,a,r,m){return h(),c(b,null,[u("div",re,[e.showingPopup?(h(),c("div",{key:0,class:"overlay",onClick:n[0]||(n[0]=(...t)=>e.hidePopup&&e.hidePopup(...t))})):E("",!0),de,u("div",{contenteditable:"true",innerHTML:e.input,class:"text-box",ref:"myTextBox",onInput:n[1]||(n[1]=(...t)=>e.updateText&&e.updateText(...t)),onClick:n[2]||(n[2]=(...t)=>e.removePlaceholder&&e.removePlaceholder(...t)),onKeydown:n[3]||(n[3]=(...t)=>e.updateText&&e.updateText(...t)),onKeyup:n[4]||(n[4]=(...t)=>e.updateText&&e.updateText(...t)),onMouseup:n[5]||(n[5]=(...t)=>e.updateText&&e.updateText(...t)),onBlur:n[6]||(n[6]=(...t)=>e.addPlaceholder&&e.addPlaceholder(...t)),style:k({width:this.width})},null,44,ue),u("div",pe,[u("button",{class:"question-button",onClick:n[7]||(n[7]=(...t)=>e.showPopup&&e.showPopup(...t))},"?"),u("button",{class:I({highlighted:e.activeButton==="normal_button"}),onClick:n[8]||(n[8]=t=>e.surroundTextWithTag("normal_button"))}," X ",2),u("button",{class:I({highlighted:e.activeButton==="sup_button"}),onClick:n[9]||(n[9]=t=>e.surroundTextWithTag("sup_button"))},[B(" X"),me],2),u("button",{class:I({highlighted:e.activeButton==="sub_button"}),onClick:n[10]||(n[10]=t=>e.surroundTextWithTag("sub_button"))},[B(" X"),ge],2),u("button",{class:I({highlighted:e.activeButton==="compute_button"}),onClick:n[11]||(n[11]=t=>this.input=e.compute(this.displayText))},P(e.isConverted?"Revert":"Convert"),3)])]),e.showingPopup?(h(),c("div",fe,[B(' The WRASCAL database cannot interpret the molecular formula and can only parse molecules in a "WRASCAL syntax". Use the given buttons to input molecules, then press the "convert" button to automatically generate the input. The WRASCAL format includes a paired list of elements and their total charge. Click the button again to revert the output to a standard molecular formula. '),u("button",{class:"close-button",onClick:n[12]||(n[12]=(...t)=>e.hidePopup&&e.hidePopup(...t))},"Close")])):E("",!0)],64)}const V=y(le,[["render",he],["__scopeId","data-v-0926ac63"]]),ce=C({name:"LigandInfo",props:{isLoading:{type:Boolean,default:!1}},components:{ChemInput:V},data:()=>({ligand_name:"",molecular_formula_charge:"",ligand_form_protonation:"",ligand_form_charge:"",ligand_molecular_formula:"",ligand_charge:"",ligand_categories:"",ligand_molecular_formula_name:"Ligand Molecular Formula",ligand_molecular_formula_width:"300px"}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),ve=u("h2",null,"Ligand",-1);function be(e,n,s,a,r,m){const t=v("ChemInput");return h(),c(b,null,[ve,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Ligand Name","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=i=>e.entry("ligand_name",e.ligand_name)),"model-value":e.ligand_name,"onUpdate:modelValue":n[1]||(n[1]=i=>e.ligand_name=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Ligand Form Protonation","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[2]||(n[2]=i=>e.entry("ligand_form_protonation",e.ligand_form_protonation)),"model-value":e.ligand_form_protonation,"onUpdate:modelValue":n[3]||(n[3]=i=>e.ligand_form_protonation=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Ligand Form Charge","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[4]||(n[4]=i=>e.entry("ligand_form_charge",e.ligand_form_charge)),"model-value":e.ligand_form_charge,"onUpdate:modelValue":n[5]||(n[5]=i=>e.ligand_form_charge=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(t,{name:e.ligand_molecular_formula_name,length:e.ligand_molecular_formula_width,onComputeFormula:n[6]||(n[6]=i=>e.entry("ligand_molecular_formula",i)),onComputeCharge:n[7]||(n[7]=i=>e.entry("ligand_charge",i))},null,8,["name","length"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Ligand Charge","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[8]||(n[8]=i=>e.entry("ligand_charge",e.ligand_charge)),"model-value":e.ligand_charge,"onUpdate:modelValue":n[9]||(n[9]=i=>e.ligand_charge=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Ligand Categories","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[10]||(n[10]=i=>e.entry("ligand_categories",e.ligand_categories)),"model-value":e.ligand_categories,"onUpdate:modelValue":n[11]||(n[11]=i=>e.ligand_categories=i)},null,8,["loading","model-value"])]),_:1})]),_:1})],64)}const ye=y(ce,[["render",be]]),Ce=C({name:"MetalInfo",props:{isLoading:{type:Boolean,default:!1}},components:{ChemInput:V},data:()=>({metal_id:"",metal_central_element:"",metal_formula_string:"",metal_charge:"",formula_string_name:"Formula String",formula_string_width:"300px"}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),_e=u("h2",null,"Metal",-1);function $e(e,n,s,a,r,m){const t=v("ChemInput");return h(),c(b,null,[_e,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"2"},{default:l(()=>[o(g,{label:"Central Element","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=i=>e.entry("metal_central_element",e.metal_central_element)),"model-value":e.metal_central_element,"onUpdate:modelValue":n[1]||(n[1]=i=>e.metal_central_element=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"2"},{default:l(()=>[o(g,{label:"Charge","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[2]||(n[2]=i=>e.entry("metal_charge",e.metal_charge)),"model-value":e.metal_charge,"onUpdate:modelValue":n[3]||(n[3]=i=>e.metal_charge=i)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(t,{name:e.formula_string_name,width:e.formula_string_width,onComputeFormula:n[4]||(n[4]=i=>e.entry("ligand_molecular_formula",i)),onComputeCharge:n[5]||(n[5]=i=>e.entry("ligand_charge",i))},null,8,["name","width"])]),_:1})]),_:1})],64)}const Te=y(Ce,[["render",$e]]),Le=C({name:"ConditionsInfo",props:{isLoading:{type:Boolean,default:!1}},data:()=>({constant_kind:"",temperature:"",temperature_varies:!1,ionic_strength:""}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),Ie=u("h2",null," Conditions",-1);function Be(e,n,s,a,r,m){return h(),c(b,null,[Ie,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"3"},{default:l(()=>[o(g,{label:"Constant Kind","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=t=>e.entry("conditions_constant_kind",e.constant_kind)),"model-value":e.constant_kind,"onUpdate:modelValue":n[1]||(n[1]=t=>e.constant_kind=t)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"3"},{default:l(()=>[o(g,{label:"Temperature","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onInput:n[2]||(n[2]=t=>e.entry("conditions_temperature",e.temperature)),"model-value":e.temperature,"onUpdate:modelValue":n[3]||(n[3]=t=>e.temperature=t),type:"number"},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"3"},{default:l(()=>[o(q,{label:"Temperature Varies?",onInput:n[4]||(n[4]=t=>e.entry("conditions_temperature_varies",e.temperature_varies)),"model-value":e.temperature_varies,"onUpdate:modelValue":n[5]||(n[5]=t=>e.temperature_varies=t)},null,8,["model-value"])]),_:1}),o(p,{cols:"12",md:"3"},{default:l(()=>[o(g,{label:"Ionic Strength","prepend-icon":"mdi-gold",variant:"solo",loading:e.isLoading??!1,onChange:n[6]||(n[6]=t=>e.entry("conditions_ionic_strength",e.ionic_strength)),"model-value":e.ionic_strength,"onUpdate:modelValue":n[7]||(n[7]=t=>e.ionic_strength=t),type:"number"},null,8,["loading","model-value"])]),_:1})]),_:1})],64)}const we=y(Le,[["render",Be]]),Se=C({name:"ConstantsInfo",props:{isLoading:{type:Boolean,default:!1},constants_value:{type:Number,default:0},constants_significant_figures:{type:Number,default:0}},data:()=>({constants_value:0,constants_significant_figures:0}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),Ee=u("h2",null,"Constants",-1);function He(e,n,s,a,r,m){return h(),c(b,null,[Ee,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Constants Value","prepend-icon":"mdi-numeric",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=t=>e.entry("constants_value",e.constants_value)),"model-value":e.constants_value,"onUpdate:modelValue":n[1]||(n[1]=t=>e.constants_value=t)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Significant Figures","prepend-icon":"mdi-numeric",variant:"solo",loading:e.isLoading??!1,onChange:n[2]||(n[2]=t=>e.entry("constants_significant_figures",e.constants_significant_figures)),"model-value":e.constants_significant_figures,"onUpdate:modelValue":n[3]||(n[3]=t=>e.constants_significant_figures=t)},null,8,["loading","model-value"])]),_:1})]),_:1})],64)}const Ve=y(Se,[["render",He]]),Ne=C({name:"FootnotesInfo",props:{isLoading:{type:Boolean,default:!1}},data:()=>({notes:[{type:"",content:""},{type:"",content:""}]}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),ke=u("h2",null,"Footnotes",-1);function Pe(e,n,s,a,r,m){const t=v("v-list-item-content");return h(),c(b,null,[ke,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12"},{default:l(()=>[o(R,{dense:""},{default:l(()=>[(h(!0),c(b,null,M(e.notes,(i,d)=>(h(),H(A,{key:d},{default:l(()=>[o(t,null,{default:l(()=>[o(g,{label:`Note Type (${d+1})`,"model-value":i.type,"onUpdate:modelValue":f=>i.type=f,onChange:f=>e.entry("note_type",i.type),"prepend-icon":"mdi-note-outline",variant:"solo",loading:e.isLoading??!1},null,8,["label","model-value","onUpdate:modelValue","onChange","loading"]),o(g,{label:`Note Content (${d+1})`,"model-value":i.content,"onUpdate:modelValue":f=>i.content=f,onChange:f=>e.entry("note_content",i.content),"prepend-icon":"mdi-note-outline",variant:"solo",loading:e.isLoading??!1},null,8,["label","model-value","onUpdate:modelValue","onChange","loading"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})],64)}const Fe=y(Ne,[["render",Pe]]),Ue=C({name:"UncertaintiesInfo",props:{isLoading:{type:Boolean,default:!1}},data:()=>({direction:"",magnitude:0}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),Re=u("h2",null,"Uncertainties",-1);function Me(e,n,s,a,r,m){return h(),c(b,null,[Re,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Direction","prepend-icon":"mdi-information-outline",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=t=>e.entry("direction",e.direction)),"model-value":e.direction,"onUpdate:modelValue":n[1]||(n[1]=t=>e.direction=t)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Magnitude","prepend-icon":"mdi-information-outline",variant:"solo",loading:e.isLoading??!1,onChange:n[2]||(n[2]=t=>e.entry("magnitude",e.magnitude)),"model-value":e.magnitude,"onUpdate:modelValue":n[3]||(n[3]=t=>e.magnitude=t)},null,8,["loading","model-value"])]),_:1})]),_:1})],64)}const Ae=y(Ue,[["render",Me]]),Oe=C({name:"LiteraturesInfo",props:{isLoading:{type:Boolean,default:!1}},data:()=>({litref:"",litcode:""}),methods:{entry(e,n){this.$emit("entry",{fieldToChange:e,dataToSend:n})}}}),We=u("h2",null,"Literature",-1);function qe(e,n,s,a,r,m){return h(),c(b,null,[We,o($,{class:"pt-8"},{default:l(()=>[o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Literature Reference","prepend-icon":"mdi-book-open-page-variant",variant:"solo",loading:e.isLoading??!1,onChange:n[0]||(n[0]=t=>e.entry("litref",e.litref)),"model-value":e.litref,"onUpdate:modelValue":n[1]||(n[1]=t=>e.litref=t)},null,8,["loading","model-value"])]),_:1}),o(p,{cols:"12",md:"6"},{default:l(()=>[o(g,{label:"Literature Code","prepend-icon":"mdi-book-open-page-variant",variant:"solo",loading:e.isLoading??!1,onChange:n[2]||(n[2]=t=>e.entry("litcode",e.litcode)),"model-value":e.litcode,"onUpdate:modelValue":n[3]||(n[3]=t=>e.litcode=t)},null,8,["loading","model-value"])]),_:1})]),_:1})],64)}const je=y(Oe,[["render",qe]]);async function ze(e){try{const s=await(await fetch("http://localhost:8081/rest/write/db",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();console.log("Success:",s)}catch(n){console.error("Error:",n)}}function De(){const e=window.localStorage.getItem("sb-eauyarvlibdxezijtoyx-auth-token")||"";return JSON.parse(e).user.id}const Ke=C({name:"NewEntryForm",props:{isLoading:{type:Boolean,default:!1}},components:{MetalInfo:Te,ConditionsInfo:we,ConstantsInfo:Ve,LigandInfo:ye,FootnotesInfo:Fe,UncertaintiesInfo:Ae,LiteraturesInfo:je},data:()=>({metal_central_element:"",metal_formula_string:"",metal_charge:"",ligand_name:"",ligand_molecular_formala:"",ligand_form_protonation:"",ligand_form_charge:"",ligand_charge:"",ligand_categories:"",conditions_constant_kind:"",conditions_temperature:"",conditions_temperature_varies:!1,conditions_ionic_strength:"",expression_string:"",products:"",reactants:"",constants_value:"",constants_significant_figures:"",direction:"",magnitude:"",litref:"",litcode:"",note_type:"",note_content:""}),methods:{submitForm(){console.log("ligand molecular formula",this.ligand_molecular_formala);const e={central_element:this.metal_central_element,formula_string:this.metal_formula_string,charge:parseInt(this.metal_charge)},n={name:this.ligand_name??"",molecular_formula:this.parseMolecularFormula(this.ligand_molecular_formala),form:{protonation_level:parseInt(this.ligand_form_protonation)??0,charge:parseInt(this.ligand_form_charge)??0},charge:parseInt(this.ligand_charge)??0,categories:this.ligand_categories.split(",")??[]},s={constant_kind:this.conditions_constant_kind,temperature:parseInt(this.conditions_temperature),temperature_varies:this.conditions_temperature_varies,ionic_strength:parseInt(this.conditions_ionic_strength)},a={expression_string:this.expression_string,products:this.parseExpressionEntryList(this.products),reactants:this.parseExpressionEntryList(this.reactants)},r={value:parseInt(this.constants_value),significant_figures:parseInt(this.constants_significant_figures),user_id:De()},m={direction:this.direction,magnitude:parseInt(this.magnitude)},t={litref:this.litref,litcode:this.litcode},i={notes:[{type:this.note_type??null,content:this.note_content}]},d={metalInfo:e,ligandInfo:n,conditionsInfo:s,equilibriumExpressionInfo:a,constantsInfo:r,uncertaintiesInfo:m,literaturesInfo:t,footnotesInfo:i};console.log("Sending Request"),console.log(JSON.stringify(d)),ze(d)},updateField(e){console.log("field updated: ",e.fieldToChange),this.$data[e.fieldToChange]=e.dataToSend,console.log("new value: ",this.$data[e.fieldToChange])},parseMolecularFormula(e){var r;const n=[],s=/\([a-zA-Z]+,\d+\)/g;if(!e)return{atoms:n,charge:-1};[...e.matchAll(s)].forEach((m,t)=>{m.forEach((i,d)=>{const[f,_]=i.substring(1,i.length-1).split(","),T=f,L=parseInt(_);if(isNaN(L))throw new TypeError(`invalid amount in record atomCount: [${f}][${_}]`);var N={element:T,count:L};n.push(N)})});const a=+(((r=e.split(",").at(-1))==null?void 0:r.replace(")",""))??"");if(isNaN(a))throw new TypeError("invalid amount in record charge");return{atoms:n,charge:a}},parseExpressionEntryList(e){if(!e)return[];var n=[];return e.replace(/\s/g,"").split("),(").forEach(a=>{const[r,m]=a.split(","),t=+parseInt(m);if(isNaN(t))throw new TypeError(`invalid amount in record equivalents: [${m}]`);n.push({species:r,equivalents:t})}),n}}}),Je=u("h1",null,"New Entry Submission",-1),Xe=u("br",null,null,-1);function Ze(e,n,s,a,r,m){const t=v("MetalInfo"),i=v("LigandInfo"),d=v("ConditionsInfo"),f=v("ConstantsInfo"),_=v("UncertaintiesInfo"),T=v("LiteraturesInfo"),L=v("FootnotesInfo");return h(),H(W,{class:"pt-8"},{default:l(()=>[Je,Xe,o(t,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(i,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(d,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(f,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(_,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(T,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(L,{isLoading:e.isLoading,onEntry:e.updateField},null,8,["isLoading","onEntry"]),o(O,{id:"sumbitbutton",type:"submit",block:"",class:"mt-2",color:"primary",onClick:e.submitForm},{default:l(()=>[B("Submit")]),_:1},8,["onClick"])]),_:1})}const xe=y(Ke,[["render",Ze]]);export{xe as default};
