var G=Object.defineProperty;var W=(e,a,t)=>a in e?G(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t;var u=(e,a,t)=>(W(e,typeof a!="symbol"?a+"":a,t),t);import{p as z,m as J,e as X,f as Y,g as Z,h as x,i as _,j as ee,k as ae,u as te,l as se,n as ie,q as le,s as ne,t as oe,v as re,x as B,y as K,z as O,A as de,B as ue,C as ce,D as N,a as i,E as me,F as ge,G as he,H as q,I as pe,J as fe,K as ve,d as T,_ as R,o as V,c as y,w as d,L as g,M as Ce,N as b,O as $,P as h,Q as Se,R as Ve,S as ye,r as H,T as D,U as be}from"./index-2c9c234b.js";import{V as A,a as C}from"./VCol-5d00c68c.js";import{V as ke}from"./VAlert-3386bb7c.js";import{s as Le,a as we,b as $e}from"./searchResultStore-303d8faa.js";function Ue(e){const a=K(e);let t=-1;function s(){clearInterval(t)}function o(){s(),ve(()=>a.value=e)}function r(l){const c=l?getComputedStyle(l):{transitionDuration:.2},n=parseFloat(c.transitionDuration)*1e3||200;if(s(),a.value<=0)return;const p=performance.now();t=window.setInterval(()=>{const f=performance.now()-p+n;a.value=Math.max(e-f,0),a.value<=0&&s()},n)}return fe(s),{clear:s,time:a,start:r,reset:o}}const Ie=z({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...J({location:"bottom"}),...X(),...Y(),...Z(),...x(),..._(ee({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Pe=ae()({name:"VSnackbar",props:Ie(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const s=te(e,"modelValue"),{locationStyles:o}=se(e),{positionClasses:r}=ie(e),{scopeId:l}=le(),{themeClasses:c}=ne(e),{colorClasses:n,colorStyles:p,variantClasses:f}=oe(e),{roundedClasses:k}=re(e),m=Ue(Number(e.timeout)),v=B(),M=B(),U=K(!1);O(s,L),O(()=>e.timeout,L),de(()=>{s.value&&L()});let I=-1;function L(){m.reset(),window.clearTimeout(I);const S=Number(e.timeout);if(!s.value||S===-1)return;const P=ue(M.value);m.start(P),I=window.setTimeout(()=>{s.value=!1},S)}function Q(){m.reset(),window.clearTimeout(I)}function j(){U.value=!0,Q()}function E(){U.value=!1,L()}return ce(()=>{const S=N.filterProps(e),P=!!(t.default||t.text||e.text);return i(N,q({ref:v,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},r.value,e.class],style:e.style},S,{modelValue:s.value,"onUpdate:modelValue":w=>s.value=w,contentProps:q({class:["v-snackbar__wrapper",c.value,n.value,k.value,f.value],style:[o.value,p.value],onPointerenter:j,onPointerleave:E},S.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},l),{default:()=>{var w,F;return[me(!1,"v-snackbar"),e.timer&&i("div",{key:"timer",class:"v-snackbar__timer"},[i(ge,{ref:M,active:!U.value,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":m.time.value},null)]),P&&i("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((w=t.text)==null?void 0:w.call(t))??e.text,(F=t.default)==null?void 0:F.call(t)]),t.actions&&i(he,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[i("div",{class:"v-snackbar__actions"},[t.actions()])]})]},activator:t.activator})}),pe({},v)}}),Te=T({name:"SimpleSearchForm",props:{isLoading:{type:Boolean,default:!1},ligands:{type:String,default:""}},data:()=>({ligandsValue:"",debounceTimer:void 0}),methods:{searchLigands(){this.$emit("onSearch")},onLigandsUpdate(){this.debounceTimer&&window.clearTimeout(this.debounceTimer),this.debounceTimer=window.setTimeout(()=>{this.$emit("update:ligands",this.ligandsValue)},300)},clearLigands(){this.ligandsValue="",this.$emit("update:ligands",this.ligandsValue)}}}),Re={class:"pa-4 text-end"};function Ae(e,a,t,s,o,r){return V(),y(A,{class:"pt-8"},{default:d(()=>[i(g,{class:"pt-10",density:"compact",variant:"solo",label:"Search Ligands","append-inner-icon":"mdi-magnify","append-icon":"mdi-close-circle","single-line":"","hide-details":"","model-value":e.ligandsValue,"onUpdate:modelValue":a[0]||(a[0]=l=>e.ligandsValue=l),onInput:e.onLigandsUpdate,"onClick:appendInner":e.searchLigands,"onClick:append":e.clearLigands,onKeyup:Ce(e.searchLigands,["enter"]),loading:e.isLoading??!1},null,8,["model-value","onInput","onClick:appendInner","onClick:append","onKeyup","loading"]),b("div",Re,[i($,{onClick:e.searchLigands,class:"text-none",color:"primary","min-width":"92"},{default:d(()=>[h(" Search ")]),_:1},8,["onClick"])])]),_:1})}const Me=R(Te,[["render",Ae]]);class Fe{constructor(a,t,s,o,r,l){u(this,"ligands");u(this,"metals");u(this,"categories");u(this,"ligandCharges");u(this,"metalCharges");u(this,"chemicals");this.ligands=a,this.metals=t,this.categories=s,this.ligandCharges=o,this.metalCharges=r,this.chemicals=l}onlyHasLigands(){return!!this.ligands&&!this.metals&&!this.categories&&!this.ligandCharges&&!this.metalCharges&&!this.chemicals}getRequestModel(){var c,n,p,f,k,m;const a=((c=this.ligands)==null?void 0:c.split(","))??[],t=((n=this.metals)==null?void 0:n.split(","))??[],s=((p=this.categories)==null?void 0:p.split(","))??[],o=((f=this.ligandCharges)==null?void 0:f.split(",").map(v=>+v))??[],r=((k=this.metalCharges)==null?void 0:k.split(",").map(v=>+v))??[],l=((m=this.chemicals)==null?void 0:m.split(","))??[];return new Be(a,t,s,o,r,l,300)}}class Be{constructor(a,t=[],s=[],o=[],r=[],l=[],c=100){u(this,"ligands");u(this,"metals");u(this,"categories");u(this,"ligandCharges");u(this,"metalCharges");u(this,"chemicals");u(this,"limit");this.ligands=a,this.metals=t,this.categories=s,this.ligandCharges=o,this.metalCharges=r,this.chemicals=l,this.limit=c}}const Oe=T({name:"AdvanceSearchForm",props:{isLoading:{type:Boolean,default:!1},ligands:{type:String,default:""},metals:{type:String,default:""},categories:{type:String,default:""},ligandCharges:{type:String,default:""},metalCharges:{type:String,default:""},chemicals:{type:String,default:""}},data:()=>({ligandsValue:"",metalsValue:"",categoriesValue:"",ligandChargesValue:"",metalChargesValue:"",chemicalsValue:""}),methods:{searchLigands(){this.$emit("onSearch")},onLigandsUpdate(){this.$emit("update:ligands",this.ligandsValue)},onMetalsUpdate(){this.$emit("update:metals",this.metalsValue)},onCategoriesUpdate(){this.$emit("update:categories",this.categoriesValue)},onLigandChargesUpdate(){this.$emit("update:ligandCharges",this.ligandChargesValue)},onMetalChargesUpdate(){this.$emit("update:metalCharges",this.metalChargesValue)},onChemicalsUpdate(){this.$emit("update:chemicals",this.chemicalsValue)}}}),Ne=b("b",null,",",-1);function qe(e,a,t,s,o,r){return V(),y(A,{class:"pt-8"},{default:d(()=>[i(ke,{border:"start",variant:"tonal",type:"info",closable:"","close-label":"Close Alert",title:"Advanced Search Tips",class:"text-left"},{default:d(()=>[h(" All the fields below support multiple entries, you can input one or more entries split by: "),Ne,h(" For example: Fe, H, Ca ")]),_:1}),i(Se,{class:"pt-8"},{default:d(()=>[i(C,{cols:"12",md:"12"},{default:d(()=>[i(g,{label:"Categories","prepend-icon":"mdi-list-box-outline",variant:"solo",loading:e.isLoading??!1,onInput:e.onCategoriesUpdate,"model-value":e.categoriesValue,"onUpdate:modelValue":a[0]||(a[0]=l=>e.categoriesValue=l)},null,8,["loading","onInput","model-value"])]),_:1}),i(C,{cols:"12",md:"12"},{default:d(()=>[i(g,{label:"Ligands","prepend-icon":"mdi-chemical-weapon",variant:"solo",loading:e.isLoading??!1,onInput:e.onLigandsUpdate,"model-value":e.ligandsValue,"onUpdate:modelValue":a[1]||(a[1]=l=>e.ligandsValue=l)},null,8,["loading","onInput","model-value"])]),_:1}),i(C,{cols:"12",md:"12"},{default:d(()=>[i(g,{label:"Chemicals","prepend-icon":"mdi-bottle-tonic-skull-outline",variant:"solo",loading:e.isLoading??!1,onInput:e.onChemicalsUpdate,"model-value":e.chemicalsValue,"onUpdate:modelValue":a[2]||(a[2]=l=>e.chemicalsValue=l)},null,8,["loading","onInput","model-value"])]),_:1}),i(C,{cols:"12",md:"4"},{default:d(()=>[i(g,{label:"Metals","prepend-icon":"mdi-soldering-iron",variant:"solo",loading:e.isLoading??!1,onInput:e.onMetalsUpdate,"model-value":e.metalsValue,"onUpdate:modelValue":a[3]||(a[3]=l=>e.metalsValue=l)},null,8,["loading","onInput","model-value"])]),_:1}),i(C,{cols:"12",md:"4"},{default:d(()=>[i(g,{label:"Metal Charge","prepend-icon":"mdi-flash",variant:"solo",loading:e.isLoading??!1,onInput:e.onMetalChargesUpdate,"model-value":e.metalChargesValue,"onUpdate:modelValue":a[4]||(a[4]=l=>e.metalChargesValue=l)},null,8,["loading","onInput","model-value"])]),_:1}),i(C,{cols:"12",md:"4"},{default:d(()=>[i(g,{label:"Ligand Charge","prepend-icon":"mdi-lightning-bolt-outline",variant:"solo",loading:e.isLoading??!1,onInput:e.onLigandChargesUpdate,"model-value":e.ligandChargesValue,"onUpdate:modelValue":a[5]||(a[5]=l=>e.ligandChargesValue=l)},null,8,["loading","onInput","model-value"])]),_:1})]),_:1}),i($,{type:"submit",block:"",class:"mt-2",color:"primary",onClick:e.searchLigands},{default:d(()=>[h("Submit")]),_:1},8,["onClick"])]),_:1})}const He=R(Oe,[["render",qe]]),De=T({name:"home",setup:()=>{Ve({title:"Home"})},components:{AdvanceSearchForm:He,SimpleSearchForm:Me},data:()=>({isSimpleSearch:!0,isLoading:!1,snackbar:!1,text:"Failed to fetch search result from the server. Please try again.",ligands:"",metals:"",categories:"",ligandCharges:"",metalCharges:"",chemicals:""}),computed:{nistIconStyle(){return ye().global.current.value.dark?"filter: invert(0%);":"filter: invert(100%);"},searchOptionSwitchButtonContent(){return this.isSimpleSearch?"Advanced Search":"Simple Search"}},methods:{switchSearchMode(){this.isSimpleSearch=!this.isSimpleSearch},async searchLigands(){var e,a,t;try{this.isLoading=!0;const s=Le(),o=new Fe(this.ligands,this.metals,this.categories,this.ligandCharges,this.metalCharges,this.chemicals);if(o.onlyHasLigands()){const r=await we(((e=o.ligands)==null?void 0:e.split(","))??[]);if(!r){this.text="No results found.",this.snackbar=!0;return}s.searchResult=r,s.setLastQuery((((a=o.ligands)==null?void 0:a.split(","))??[])[0]??""),this.$router.push("/search-result")}else{const r=await $e(o.getRequestModel());if(!r){this.text="No results found.",this.snackbar=!0;return}s.searchResult=r,s.setLastQuery(((t=o.getRequestModel().ligands)==null?void 0:t[0])??""),this.$router.push("/search-result")}}catch{this.text="Search failed. Please check your input or try again.",this.snackbar=!0}finally{this.isLoading=!1}}}}),Ke=b("div",{class:"text-left text-h2"},"WRASCAL",-1),Qe=b("div",{class:"text-left text-h6 pl-2"},"Whitman Repository of Accepted Stability Constants of Aqueous Ligands",-1),je={class:"d-flex justify-end mb-6 pt-5"};function Ee(e,a,t,s,o,r){const l=H("SimpleSearchForm"),c=H("AdvanceSearchForm");return V(),y(A,{class:"fill-height"},{default:d(()=>[i(be,{class:"d-flex align-center text-center fill-height"},{default:d(()=>[Ke,Qe,e.isSimpleSearch?(V(),y(l,{key:0,ligands:this.ligands,"onUpdate:ligands":a[0]||(a[0]=n=>this.ligands=n),"is-loading":e.isLoading,onOnSearch:e.searchLigands},null,8,["ligands","is-loading","onOnSearch"])):(V(),y(c,{key:1,"is-loading":e.isLoading,ligands:this.ligands,"onUpdate:ligands":a[1]||(a[1]=n=>this.ligands=n),metals:this.metals,"onUpdate:metals":a[2]||(a[2]=n=>this.metals=n),categories:this.categories,"onUpdate:categories":a[3]||(a[3]=n=>this.categories=n),chemicals:this.chemicals,"onUpdate:chemicals":a[4]||(a[4]=n=>this.chemicals=n),"ligand-charges":this.ligandCharges,"onUpdate:ligandCharges":a[5]||(a[5]=n=>this.ligandCharges=n),"metal-charges":this.metalCharges,"onUpdate:metalCharges":a[6]||(a[6]=n=>this.metalCharges=n),onOnSearch:e.searchLigands},null,8,["is-loading","ligands","metals","categories","chemicals","ligand-charges","metal-charges","onOnSearch"])),b("div",je,[i($,{variant:"text",color:"primary","append-icon":"mdi-arrow-right",onClick:e.switchSearchMode},{default:d(()=>[h(D(e.searchOptionSwitchButtonContent),1)]),_:1},8,["onClick"])]),i(Pe,{modelValue:e.snackbar,"onUpdate:modelValue":a[8]||(a[8]=n=>e.snackbar=n),"multi-line":"",color:"error"},{actions:d(()=>[i($,{color:"red",variant:"text",onClick:a[7]||(a[7]=n=>e.snackbar=!1)},{default:d(()=>[h(" Close ")]),_:1})]),default:d(()=>[h(D(e.text)+" ",1)]),_:1},8,["modelValue"])]),_:1})]),_:1})}const Ye=R(De,[["render",Ee]]);export{Ye as default};
