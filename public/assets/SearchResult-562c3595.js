import{g as Z,s as L}from"./searchResultStore-c45b7af4.js";import{p as S,W as E,X as q,Y as Q,h as J,k as T,Z as G,s as K,$ as k,a0 as j,a1 as C,C as D,a as n,a2 as O,a3 as U,a4 as ee,a5 as W,a6 as ae,a7 as te,a8 as M,a9 as ne,aa as X,ab as se,ac as le,ad as oe,ae as ie,f as re,af as de,ag as ce,v as ue,ah as pe,d as ve,R as fe,_ as he,o as c,c as x,w as l,O as V,P as r,ai as ge,N as i,T as g,Q as me,aj as y,ak as B,al as H,U as _e,am as R,an as A,ao as xe,ap as ye}from"./index-af99554e.js";import{M as ke,k as Ve,E as Ce}from"./ElementDisplayUtils-cc25b081.js";import{V as Pe,a as be}from"./VCol-5cdfd47e.js";import{V as Se,a as Ee,b as Te}from"./VCard-9ba2f00b.js";import{V as z}from"./VAlert-9adcf782.js";const P=Symbol.for("vuetify:v-expansion-panel"),De=["default","accordion","inset","popout"],Re=S({color:String,static:Boolean,variant:{type:String,default:"default",validator:e=>De.includes(e)},readonly:Boolean,...E(),...q(),...Q(),...J()},"VExpansionPanels"),F=T()({name:"VExpansionPanels",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:s}=a;G(e,P);const{themeClasses:t}=K(e),f=k(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return j({VExpansionPanel:{color:C(e,"color"),readonly:C(e,"readonly"),static:C(e,"static")}}),D(()=>n(e.tag,{class:["v-expansion-panels",t.value,f.value,e.class],style:e.style},s)),{}}}),$e=S({...E(),...O()},"VExpansionPanelText"),$=T()({name:"VExpansionPanelText",props:$e(),setup(e,a){let{slots:s}=a;const t=U(P);if(!t)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:f,onAfterLeave:_}=ee(e,t.isSelected);return D(()=>n(te,{onAfterLeave:_},{default:()=>{var v;return[W(n("div",{class:["v-expansion-panel-text",e.class],style:e.style},[s.default&&f.value&&n("div",{class:"v-expansion-panel-text__wrapper"},[(v=s.default)==null?void 0:v.call(s)])]),[[ae,t.isSelected.value]])]}})),{}}}),Y=S({color:String,expandIcon:{type:M,default:"$expand"},collapseIcon:{type:M,default:"$collapse"},hideActions:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...E()},"VExpansionPanelTitle"),w=T()({name:"VExpansionPanelTitle",directives:{Ripple:ne},props:Y(),setup(e,a){let{slots:s}=a;const t=U(P);if(!t)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:f,backgroundColorStyles:_}=X(e,"color"),v=k(()=>({collapseIcon:e.collapseIcon,disabled:t.disabled.value,expanded:t.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly}));return D(()=>{var m;return W(n("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":t.isSelected.value,"v-expansion-panel-title--static":e.static},f.value,e.class],style:[_.value,e.style],type:"button",tabindex:t.disabled.value?-1:void 0,disabled:t.disabled.value,"aria-expanded":t.isSelected.value,onClick:e.readonly?void 0:t.toggle},[n("span",{class:"v-expansion-panel-title__overlay"},null),(m=s.default)==null?void 0:m.call(s,v.value),!e.hideActions&&n("span",{class:"v-expansion-panel-title__icon"},[s.actions?s.actions(v.value):n(le,{icon:t.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[se("ripple"),e.ripple]])}),{}}}),we=S({title:String,text:String,bgColor:String,...E(),...oe(),...ie(),...O(),...re(),...Q(),...Y()},"VExpansionPanel"),N=T()({name:"VExpansionPanel",props:we(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:s}=a;const t=de(e,P),{backgroundColorClasses:f,backgroundColorStyles:_}=X(e,"bgColor"),{elevationClasses:v}=ce(e),{roundedClasses:m}=ue(e),u=k(()=>(t==null?void 0:t.disabled.value)||e.disabled),d=k(()=>t.group.items.value.reduce((h,p,b)=>(t.group.selected.value.includes(p.id)&&h.push(b),h),[])),o=k(()=>{const h=t.group.items.value.findIndex(p=>p.id===t.id);return!t.isSelected.value&&d.value.some(p=>p-h===1)}),I=k(()=>{const h=t.group.items.value.findIndex(p=>p.id===t.id);return!t.isSelected.value&&d.value.some(p=>p-h===-1)});return pe(P,t),j({VExpansionPanelText:{eager:C(e,"eager")},VExpansionPanelTitle:{readonly:C(e,"readonly")}}),D(()=>{const h=!!(s.text||e.text),p=!!(s.title||e.title);return n(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":t.isSelected.value,"v-expansion-panel--before-active":o.value,"v-expansion-panel--after-active":I.value,"v-expansion-panel--disabled":u.value},m.value,f.value,e.class],style:[_.value,e.style]},{default:()=>{var b;return[n("div",{class:["v-expansion-panel__shadow",...v.value]},null),p&&n(w,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[s.title?s.title():e.title]}),h&&n($,{key:"text"},{default:()=>[s.text?s.text():e.text]}),(b=s.default)==null?void 0:b.call(s)]}})}),{}}}),Ie=ve({name:"SearchResult",setup:()=>{fe({title:"Search Results"})},data:()=>({searchResult:[],lastQuery:"",constantsData:{},loadingConstants:{},constantHeaders:[{title:"Expression",align:"start",key:"expression_string"},{title:"Constant Kind",align:"end",key:"constant_kind"},{title:"Temp (Â°C)",align:"end",key:"temperature"},{title:"Ionic Strength (M)",align:"center",key:"ionic_strength"},{title:"Value",align:"start",key:"value"},{title:"Actions",key:"data-table-expand"}]}),computed:{groupedByLigand(){const e={};for(const a of this.searchResult)e[a.name]||(e[a.name]=[]),e[a.name].push(a);return e}},methods:{returnToSearchPage(){this.$router.go(-1)},groupMetalsByLigand(e){const a={};for(const s of e){const t=`${s.central_element}_${s.metal_id}_${s.ligand_id}`;a[t]||(a[t]=[]),a[t].push(s)}return a},async loadConstants(e){const a=`${e.central_element}_${e.metal_id}_${e.ligand_id}`;if(!this.constantsData[a]){this.loadingConstants[a]=!0;try{const s=await Z(e.ligand_id,e.metal_id);s?this.constantsData[a]=s:this.constantsData[a]=[]}catch(s){console.error("Error loading constants:",s),this.constantsData[a]=[]}finally{this.loadingConstants[a]=!1}}},goToDetailPage(e){const a=L();a.selectedSearchResult=e,this.$router.push("/detail-view")},getFormattedMetalForm(e){if(!e)return"-";const a=ke.formatMetalFormulaString(e);return Ve.renderToString(a,{displayMode:!1,throwOnError:!1})},formatCharge(e){return Ce.formatElementCharge(+e)},formatValue(e,a){return a!==void 0?e.toPrecision(a):e.toString()},highlightMatch(e){if(!this.lastQuery)return e;const a=new RegExp(`(${this.lastQuery})`,"ig");return e.replace(a,'<span class="mark">$1</span>')}},mounted(){const e=L();this.searchResult=e.searchResult,this.lastQuery=e.lastQuery}});const Le=i("div",null,[i("div",{class:"d-flex text-overline mb-1"}," OVERVIEW "),i("div",{class:"d-flex text-h6 mb-1"}," Search Result "),i("div",{class:"d-flex text-caption text-left"}," Here you can view the current search results organized by ligand and metal. Expand each accordion to see the available data tables. ")],-1),Me={class:"text-caption mr-3"},Be={class:"d-flex align-center"},He=["innerHTML"],Ae={class:"d-flex align-center"},ze={class:"text-subtitle-1 mr-3"},Fe=["innerHTML"],Ne=["innerHTML"],Qe={key:0,class:"text-center pa-4"},je={key:1,class:"text-center pa-4"},Oe=i("div",{class:"mt-2"},"Loading constants...",-1),Ue={key:2},We=["innerHTML"],Xe={class:"mt-3"},Ye={key:3,class:"text-center pa-4"},Ze={class:"mt-3"};function qe(e,a,s,t,f,_){return c(),x(Pe,{class:"fill-height"},{default:l(()=>[n(_e,{class:"d-flex text-center fill-height"},{default:l(()=>[n(Se,{class:"mx-auto",variant:"outlined"},{default:l(()=>[n(Ee,null,{default:l(()=>[Le]),_:1}),n(Te,null,{default:l(()=>[n(V,{variant:"outlined","prepend-icon":"mdi-arrow-left",onClick:e.returnToSearchPage},{default:l(()=>[r(" Return To Search Page ")]),_:1},8,["onClick"]),n(ge),i("div",Me,g(e.searchResult.length)+" result(s)",1)]),_:1})]),_:1}),n(me,{justify:"center",class:"pt-10"},{default:l(()=>[n(be,{cols:"12"},{default:l(()=>[e.searchResult.length===0?(c(),x(z,{key:0,type:"info",variant:"tonal",border:"start",class:"mb-6"},{default:l(()=>[r(" No results found. Try a different ligand name or adjust your filters. ")]),_:1})):(c(),x(F,{key:1,variant:"accordion",multiple:""},{default:l(()=>[(c(!0),y(H,null,B(e.groupedByLigand,(v,m)=>(c(),x(N,{key:m},{default:l(()=>[n(w,null,{default:l(()=>[i("div",Be,[i("span",{innerHTML:e.highlightMatch(m),class:"text-h6 mr-3"},null,8,He),n(R,{size:"small",color:"primary",class:"mr-2"},{default:l(()=>[r(g(v.length)+" metal(s) ",1)]),_:2},1024)])]),_:2},1024),n($,null,{default:l(()=>[n(F,{variant:"accordion",multiple:""},{default:l(()=>[(c(!0),y(H,null,B(e.groupMetalsByLigand(v),(u,d)=>(c(),x(N,{key:d},{default:l(()=>[n(w,null,{default:l(()=>[i("div",Ae,[i("span",ze,[r(g(u[0].central_element),1),i("sup",{innerHTML:e.formatCharge(u[0].metal_charge)},null,8,Fe)]),n(R,{size:"small",color:"secondary",class:"mr-2"},{default:l(()=>[r(g(u.length)+" entry/entries ",1)]),_:2},1024),u[0].formula_string?(c(),x(R,{key:0,size:"small",color:"info"},{default:l(()=>[i("div",{class:"no-katex-html",innerHTML:e.getFormattedMetalForm(u[0].formula_string)},null,8,Ne)]),_:2},1024)):A("",!0)])]),_:2},1024),n($,null,{default:l(()=>[!e.constantsData[d]&&!e.loadingConstants[d]?(c(),y("div",Qe,[n(V,{color:"primary",onClick:o=>e.loadConstants(u[0])},{default:l(()=>[r(" Load Constants ")]),_:2},1032,["onClick"])])):e.loadingConstants[d]?(c(),y("div",je,[n(xe,{indeterminate:"",color:"primary"}),Oe])):e.constantsData[d]&&e.constantsData[d].length>0?(c(),y("div",Ue,[n(ye,{headers:e.constantHeaders,items:e.constantsData[d],"items-per-page":20,class:"elevation-1"},{"item.expression_string":l(({item:o})=>[i("div",{innerHTML:o.expression_string||"-"},null,8,We)]),"item.constant_kind":l(({item:o})=>[r(g(o.constant_kind||"-"),1)]),"item.temperature":l(({item:o})=>[r(g(o.temperature!==void 0?o.temperature+(o.temperature_varies?" (varies)":""):"-"),1)]),"item.ionic_strength":l(({item:o})=>[r(g(o.ionic_strength!==void 0?o.ionic_strength:"-"),1)]),"item.value":l(({item:o})=>[r(g(o.value!==void 0?e.formatValue(o.value,o.significant_figures):"-"),1)]),"item.data-table-expand":l(({item:o})=>[n(V,{size:"small",variant:"text",onClick:I=>e.goToDetailPage(u[0])},{default:l(()=>[r(" View Details ")]),_:2},1032,["onClick"])]),_:2},1032,["headers","items"]),i("div",Xe,[n(V,{color:"primary","prepend-icon":"mdi-share",onClick:o=>e.goToDetailPage(u[0])},{default:l(()=>[r(" View Full Details ")]),_:2},1032,["onClick"])])])):e.constantsData[d]&&e.constantsData[d].length===0?(c(),y("div",Ye,[n(z,{type:"info",variant:"tonal"},{default:l(()=>[r(" No constants data available for this metal-ligand combination. ")]),_:1}),i("div",Ze,[n(V,{color:"primary","prepend-icon":"mdi-share",onClick:o=>e.goToDetailPage(u[0])},{default:l(()=>[r(" View Detail Page ")]),_:2},1032,["onClick"])])])):A("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}const na=he(Ie,[["render",qe]]);export{na as default};
