import{g as Z,s as $}from"./searchResultStore-0a07e77f.js";import{p as S,W as b,X as q,Y as N,h as J,k as E,Z as K,s as G,$ as V,a0 as O,a1 as k,C as T,a as s,a2 as Q,a3 as j,a4 as ee,a5 as U,a6 as ae,a7 as te,a8 as w,a9 as ne,aa as W,ab as se,ac as le,ad as oe,ae as ie,f as re,af as de,ag as ce,v as ue,ah as pe,d as ve,R as fe,_ as he,o as r,c as x,w as l,O as D,P as d,ai as ge,N as i,T as g,Q as me,aj as y,ak as L,al as B,U as _e,am as R,an as xe,ao as H,ap as ye}from"./index-d9fb89b1.js";import{M as Ve,k as ke,E as Pe}from"./ElementDisplayUtils-cc25b081.js";import{V as Ce,a as Se}from"./VCol-7b858459.js";import{V as be,a as Ee,b as Te}from"./VCard-3356c268.js";import{V as A}from"./VAlert-29cfa6d9.js";const P=Symbol.for("vuetify:v-expansion-panel"),De=["default","accordion","inset","popout"],Re=S({color:String,static:Boolean,variant:{type:String,default:"default",validator:e=>De.includes(e)},readonly:Boolean,...b(),...q(),...N(),...J()},"VExpansionPanels"),F=E()({name:"VExpansionPanels",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;K(e,P);const{themeClasses:n}=G(e),f=V(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return O({VExpansionPanel:{color:k(e,"color"),readonly:k(e,"readonly"),static:k(e,"static")}}),T(()=>s(e.tag,{class:["v-expansion-panels",n.value,f.value,e.class],style:e.style},t)),{}}}),Ie=S({...b(),...Q()},"VExpansionPanelText"),I=E()({name:"VExpansionPanelText",props:Ie(),setup(e,a){let{slots:t}=a;const n=j(P);if(!n)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:f,onAfterLeave:_}=ee(e,n.isSelected);return T(()=>s(te,{onAfterLeave:_},{default:()=>{var p;return[U(s("div",{class:["v-expansion-panel-text",e.class],style:e.style},[t.default&&f.value&&s("div",{class:"v-expansion-panel-text__wrapper"},[(p=t.default)==null?void 0:p.call(t)])]),[[ae,n.isSelected.value]])]}})),{}}}),X=S({color:String,expandIcon:{type:w,default:"$expand"},collapseIcon:{type:w,default:"$collapse"},hideActions:Boolean,static:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...b()},"VExpansionPanelTitle"),M=E()({name:"VExpansionPanelTitle",directives:{Ripple:ne},props:X(),setup(e,a){let{slots:t}=a;const n=j(P);if(!n)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:f,backgroundColorStyles:_}=W(e,"color"),p=V(()=>({collapseIcon:e.collapseIcon,disabled:n.disabled.value,expanded:n.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly}));return T(()=>{var m;return U(s("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":n.isSelected.value,"v-expansion-panel-title--static":e.static},f.value,e.class],style:[_.value,e.style],type:"button",tabindex:n.disabled.value?-1:void 0,disabled:n.disabled.value,"aria-expanded":n.isSelected.value,onClick:e.readonly?void 0:n.toggle},[s("span",{class:"v-expansion-panel-title__overlay"},null),(m=t.default)==null?void 0:m.call(t,p.value),!e.hideActions&&s("span",{class:"v-expansion-panel-title__icon"},[t.actions?t.actions(p.value):s(le,{icon:n.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[se("ripple"),e.ripple]])}),{}}}),Me=S({title:String,text:String,bgColor:String,...b(),...oe(),...ie(),...Q(),...re(),...N(),...X()},"VExpansionPanel"),z=E()({name:"VExpansionPanel",props:Me(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:t}=a;const n=de(e,P),{backgroundColorClasses:f,backgroundColorStyles:_}=W(e,"bgColor"),{elevationClasses:p}=ce(e),{roundedClasses:m}=ue(e),v=V(()=>(n==null?void 0:n.disabled.value)||e.disabled),c=V(()=>n.group.items.value.reduce((h,u,C)=>(n.group.selected.value.includes(u.id)&&h.push(C),h),[])),o=V(()=>{const h=n.group.items.value.findIndex(u=>u.id===n.id);return!n.isSelected.value&&c.value.some(u=>u-h===1)}),Y=V(()=>{const h=n.group.items.value.findIndex(u=>u.id===n.id);return!n.isSelected.value&&c.value.some(u=>u-h===-1)});return pe(P,n),O({VExpansionPanelText:{eager:k(e,"eager")},VExpansionPanelTitle:{readonly:k(e,"readonly")}}),T(()=>{const h=!!(t.text||e.text),u=!!(t.title||e.title);return s(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":n.isSelected.value,"v-expansion-panel--before-active":o.value,"v-expansion-panel--after-active":Y.value,"v-expansion-panel--disabled":v.value},m.value,f.value,e.class],style:[_.value,e.style]},{default:()=>{var C;return[s("div",{class:["v-expansion-panel__shadow",...p.value]},null),u&&s(M,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[t.title?t.title():e.title]}),h&&s(I,{key:"text"},{default:()=>[t.text?t.text():e.text]}),(C=t.default)==null?void 0:C.call(t)]}})}),{}}}),$e=ve({name:"SearchResult",setup:()=>{fe({title:"Search Results"})},data:()=>({searchResult:[],lastQuery:"",constantsData:{},loadingConstants:{},constantHeaders:[{title:"Expression",align:"start",key:"expression_string"},{title:"Constant Kind",align:"end",key:"constant_kind"},{title:"Temp (Â°C)",align:"end",key:"temperature"},{title:"Ionic Strength (M)",align:"center",key:"ionic_strength"},{title:"Value",align:"start",key:"value"}]}),computed:{groupedByLigand(){const e={};for(const a of this.searchResult)a.name&&(e[a.name]||(e[a.name]=[]),e[a.name].push(a));return e}},methods:{returnToSearchPage(){this.$router.go(-1)},groupMetalsByLigand(e){const a={};for(const t of e){const n=`${t.central_element}_${t.metal_id}_${t.ligand_id}`;a[n]||(a[n]=[]),a[n].push(t)}return a},onMetalPanelOpen(e,a,t){t&&a&&a.length>0&&!this.constantsData[e]&&!this.loadingConstants[e]&&this.loadConstants(a[0])},async loadConstants(e){const a=`${e.central_element}_${e.metal_id}_${e.ligand_id}`;if(!this.constantsData[a]){this.loadingConstants[a]=!0;try{const t=await Z(e.ligand_id,e.metal_id);t?this.constantsData[a]=t:this.constantsData[a]=[]}catch(t){console.error("Error loading constants:",t),this.constantsData[a]=[]}finally{this.loadingConstants[a]=!1}}},goToDetailPage(e){const a=$();a.selectedSearchResult=e,this.$router.push("/detail-view")},getFormattedMetalForm(e){if(!e)return"-";const a=Ve.formatMetalFormulaString(e);return ke.renderToString(a,{displayMode:!1,throwOnError:!1})},formatCharge(e){return Pe.formatElementCharge(+e)},formatValue(e,a){return a!==void 0?e.toPrecision(a):e.toString()},highlightMatch(e){if(!this.lastQuery)return e;const a=new RegExp(`(${this.lastQuery})`,"ig");return e.replace(a,'<span class="mark">$1</span>')}},mounted(){const e=$();this.searchResult=e.searchResult,this.lastQuery=e.lastQuery}});const we=i("div",null,[i("div",{class:"d-flex text-overline mb-1"}," OVERVIEW "),i("div",{class:"d-flex text-h6 mb-1"}," Search Result "),i("div",{class:"d-flex text-caption text-left"}," Here you can view the current search results organized by ligand and metal. Expand each accordion to see the available data tables. ")],-1),Le={class:"text-caption mr-3"},Be={class:"d-flex align-center"},He=["innerHTML"],Ae={class:"d-flex align-center"},Fe={class:"text-subtitle-1 mr-3"},ze=["innerHTML"],Ne=["innerHTML"],Oe={key:0,class:"text-center pa-4"},Qe=i("div",{class:"mt-2"},"Loading constants...",-1),je={key:1},Ue=["innerHTML"],We={class:"mt-3"},Xe={key:2,class:"text-center pa-4"},Ye={class:"mt-3"},Ze={key:3,class:"text-center pa-4"},qe=i("div",{class:"mt-2"},"Loading constants...",-1);function Je(e,a,t,n,f,_){return r(),x(Ce,{class:"fill-height"},{default:l(()=>[s(_e,{class:"d-flex text-center fill-height"},{default:l(()=>[s(be,{class:"mx-auto",variant:"outlined"},{default:l(()=>[s(Ee,null,{default:l(()=>[we]),_:1}),s(Te,null,{default:l(()=>[s(D,{variant:"outlined","prepend-icon":"mdi-arrow-left",onClick:e.returnToSearchPage},{default:l(()=>[d(" Return To Search Page ")]),_:1},8,["onClick"]),s(ge),i("div",Le,g(e.searchResult.length)+" result(s)",1)]),_:1})]),_:1}),s(me,{justify:"center",class:"pt-10"},{default:l(()=>[s(Se,{cols:"12"},{default:l(()=>[e.searchResult.length===0?(r(),x(A,{key:0,type:"info",variant:"tonal",border:"start",class:"mb-6"},{default:l(()=>[d(" No results found. Try a different ligand name or adjust your filters. ")]),_:1})):(r(),x(F,{key:1,variant:"accordion",multiple:""},{default:l(()=>[(r(!0),y(B,null,L(e.groupedByLigand,(p,m)=>(r(),x(z,{key:m},{default:l(()=>[s(M,null,{default:l(()=>[i("div",Be,[i("span",{innerHTML:e.highlightMatch(m),class:"text-h6 mr-3"},null,8,He),s(R,{size:"small",color:"primary",class:"mr-2"},{default:l(()=>[d(g(p.length)+" metal(s) ",1)]),_:2},1024)])]),_:2},1024),s(I,null,{default:l(()=>[s(F,{variant:"accordion",multiple:""},{default:l(()=>[(r(!0),y(B,null,L(e.groupMetalsByLigand(p),(v,c)=>(r(),x(z,{key:c,"onUpdate:modelValue":o=>e.onMetalPanelOpen(c,v,o)},{default:l(()=>[s(M,null,{default:l(()=>[i("div",Ae,[i("span",Fe,[d(g(v[0].central_element),1),i("sup",{innerHTML:e.formatCharge(v[0].metal_charge)},null,8,ze)]),s(R,{size:"small",color:"secondary",class:"mr-2"},{default:l(()=>[d(g(v.length)+" entry/entries ",1)]),_:2},1024),v[0].formula_string?(r(),x(R,{key:0,size:"small",color:"info"},{default:l(()=>[i("div",{class:"no-katex-html",innerHTML:e.getFormattedMetalForm(v[0].formula_string)},null,8,Ne)]),_:2},1024)):xe("",!0)])]),_:2},1024),s(I,null,{default:l(()=>[e.loadingConstants[c]?(r(),y("div",Oe,[s(H,{indeterminate:"",color:"primary"}),Qe])):e.constantsData[c]&&e.constantsData[c].length>0?(r(),y("div",je,[s(ye,{headers:e.constantHeaders,items:e.constantsData[c],"items-per-page":20,class:"elevation-1"},{"item.expression_string":l(({item:o})=>[i("div",{innerHTML:o.expression_string||"-"},null,8,Ue)]),"item.constant_kind":l(({item:o})=>[d(g(o.constant_kind||"-"),1)]),"item.temperature":l(({item:o})=>[d(g(o.temperature!==void 0?o.temperature+(o.temperature_varies?" (varies)":""):"-"),1)]),"item.ionic_strength":l(({item:o})=>[d(g(o.ionic_strength!==void 0?o.ionic_strength:"-"),1)]),"item.value":l(({item:o})=>[d(g(o.value!==void 0?e.formatValue(o.value,o.significant_figures):"-"),1)]),_:2},1032,["headers","items"]),i("div",We,[s(D,{color:"primary","prepend-icon":"mdi-share",onClick:o=>e.goToDetailPage(v[0])},{default:l(()=>[d(" View Full Details ")]),_:2},1032,["onClick"])])])):e.constantsData[c]&&e.constantsData[c].length===0?(r(),y("div",Xe,[s(A,{type:"info",variant:"tonal"},{default:l(()=>[d(" No constants data available for this metal-ligand combination. ")]),_:1}),i("div",Ye,[s(D,{color:"primary","prepend-icon":"mdi-share",onClick:o=>e.goToDetailPage(v[0])},{default:l(()=>[d(" View Detail Page ")]),_:2},1032,["onClick"])])])):(r(),y("div",Ze,[s(H,{indeterminate:"",color:"primary"}),qe]))]),_:2},1024)]),_:2},1032,["onUpdate:modelValue"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})]),_:1})}const sa=he($e,[["render",Je]]);export{sa as default};
